{"singlePage": [], "startSite": "", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "title": "\u5218\u4f73\u946b\u7b14\u8bb0", "subTitle": "\u6b22\u8fce\u60a8", "avatarUrl": "https://github.githubassets.com/favicons/favicon.svg", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/harbor-zi-dong-hua-la-qu-jing-xiang-fang-an.html", "labels": ["\u90e8\u7f72"], "postTitle": "harbor\u81ea\u52a8\u5316\u62c9\u53d6\u955c\u50cf\u65b9\u6848", "postUrl": "post/harbor-zi-dong-hua-la-qu-jing-xiang-fang-an.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/1", "commentNum": 0, "wordCount": 2435, "description": "grep data_volume  /app/harbor/harbor.yml    #\u6839\u636e\u914d\u7f6e\u6587\u4ef6\u67e5\u627e\u6570\u636e\u5b58\u50a8\u76ee\u5f55\r\ndata_volume: /data\r\n\r\ncd /data/registry     #\u8fdb\u5165\u5230Harbor\u7684\u6570\u636e\u76ee\u5f55\u4e0b\r\n\r\nfind  docker/   -type  d  -name 'current'  | sed  's|docker/registry/v2/repositories/||g;s|/_manifests/tags/|:|g;s|/current||g'  >  images.list\r\n\r\ncat images.list\r\n\r\ncurl https://192.168.2.250:443/api/version  -k\r\n{'version':'v2.0'}\r\n![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/2390402e-6803-45a1-bf0d-e99f0347395d)\r\n\r\n\r\n\r\n```shell\r\n#!/bin/bash\r\nHarbor_Address=172.16.1.200       #Harbor\u4e3b\u673a\u5730\u5740\r\nHarbor_User=admin                      #\u767b\u5f55Harbor\u7684\u7528\u6237\r\nHarbor_Passwd=Harbor12345              #\u767b\u5f55Harbor\u7684\u7528\u6237\u5bc6\u7801\r\nImages_File=./images.list   # \u955c\u50cf\u6e05\u5355\u6587\u4ef6\r\nTar_File=/backup/Harbor-backup/                 #\u955c\u50cftar\u5305\u5b58\u653e\u8def\u5f84\r\nset -x\r\n# \u83b7\u53d6Harbor\u4e2d\u6240\u6709\u7684\u9879\u76ee\uff08Projects\uff09\r\nProject_List=$(curl -u admin:Harbor12345  -H 'Content-Type: application/json' -X GET  https://172.16.1.200/api/v2.0/projects  -k  | python3 -m json.tool | grep name | awk '/'name': /' | awk -F ''' '{print $4}')\r\n\r\nfor Project in $Project_List;do\r\n   # \u5faa\u73af\u83b7\u53d6\u9879\u76ee\u4e0b\u6240\u6709\u7684\u955c\u50cf\r\n    Image_Names=$(curl -u admin:Harbor12345 -H 'Content-Type: application/json' -X GET https://172.16.1.200/api/v2.0/projects/$Project/repositories -k | python3 -m json.tool | grep name | awk '/'name': /' | awk -F ''' '{print $4}')\r\n    for Image in $Image_Names;do\r\n        # \u5faa\u73af\u83b7\u53d6\u955c\u50cf\u7684\u7248\u672c\uff08tag)\r\n        Image_Tags=$(curl -u admin:Harbor12345  -H 'Content-Type: application/json'   -X GET  https://172.16.1.200/v2/$Image/tags/list  -k |  awk -F '''  '{print $8,$10,$12}')\r\n       for Tag in $Image_Tags;do\r\n            # \u683c\u5f0f\u5316\u8f93\u51fa\u955c\u50cf\u4fe1\u606f\r\n            echo '$Harbor_Address/$Image:$Tag'   >> harbor-images-`date '+%Y-%m-%d'`.txt\r\n        done\r\n    done\r\ndone\r\nImage_tags=$(uniq $Images_File)\r\nfor image_tag in $Image_tags;do\r\n    image_Name=$(echo $image_tag | awk -F/ '{print $3}' |  awk -F: '{print $1}')\r\n    image_Lable=$(echo $image_tag | awk -F/ '{print $3}' |  awk -F: '{print $2}')\r\n    #image_Name=$(echo $image_tag | awk -F ' +' '{print $1}')\r\n    #image_Lable=$(echo $image_tag | awk -F ' +' '{print $2}')\r\n    docker pull 172.16.1.200/$image_tag\r\n    docker tag  172.16.1.200/$image_tag $image_tag\r\n    docker save $image_tag  -o $image_Name.tar\r\n    docker rmi  172.16.1.200/$image_tag\r\n    docker rmi  $image_tag\r\n    mv $image_Name.tar  $Tar_File\r\ndone\r\n```\r\n![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/cdad1ceb-eb50-42ab-b84e-7e6fe15f9cb1)\u3002", "top": 0, "createdAt": 1717483058, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-04", "dateLabelColor": "#bc4c00"}, "P2": {"htmlDir": "docs/post/PXE-xi-tong-bu-shu.html", "labels": ["\u90e8\u7f72"], "postTitle": "PXE\u7cfb\u7edf\u90e8\u7f72", "postUrl": "post/PXE-xi-tong-bu-shu.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/2", "commentNum": 0, "wordCount": 2057, "description": "\u2727 \u4f7f\u7528http\u7528\u6765\u53d1\u5e03linux\u7cfb\u7edf\u7684\u5b89\u88c5\u6811\uff08\u4e5f\u53ef\u4ee5\u4f7f\u7528NFS\u3001FTP server\u6216HTTPS\uff09\r\n\u2727 DHCP server\u4e3a\u5ba2\u6237\u7aef\u5206\u914dip\u5e76\u63d0\u4f9bTFTP\u670d\u52a1\u5668\u5730\u5740\u53caPXE\u542f\u52a8\u6587\u4ef6\u4f4d\u7f6e\r\n\u2727 TFTP server\u4e3a\u5ba2\u6237\u7aef\u63d0\u4f9b\u5f15\u5bfc\u6587\u4ef6\u3002", "top": 0, "createdAt": 1717492033, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-04", "dateLabelColor": "#bc4c00"}, "P3": {"htmlDir": "docs/post/Gitlab-bu-shu.html", "labels": ["\u90e8\u7f72"], "postTitle": "Gitlab\u90e8\u7f72", "postUrl": "post/Gitlab-bu-shu.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/3", "commentNum": 0, "wordCount": 657, "description": "vim /etc/ssh/sshd_config\r\nPort = 2424\r\n\r\nsystemctl restart sshd\r\n\r\nmkdir -p /srv/gitlab\r\n\r\nexport GITLAB_HOME=/srv/gitlab\r\n\r\n```golang\r\n\r\nversion: '3.6'\r\nservices:\r\n  gitlab:\r\n    image: gitlab/gitlab-ce:latest\r\n    container_name: gitlab\r\n    restart: always\r\n    hostname: '172.16.8.3'\r\n    environment:\r\n      GITLAB_OMNIBUS_CONFIG: |\r\n        external_url 'http://172.16.8.3:8929'\r\n        gitlab_rails['gitlab_shell_ssh_port'] = 2424\r\n    ports:\r\n      - '8929:8929'\r\n      - '4443:443'\r\n      - '2424:22'\r\n    volumes:\r\n      - '/srv/config:/etc/gitlab'\r\n      - '/srv/logs:/var/log/gitlab'\r\n      - '/srv/data:/var/opt/gitlab'\r\n    shm_size: '256m'\r\n\u3002", "top": 0, "createdAt": 1717547991, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-05", "dateLabelColor": "#bc4c00"}, "P4": {"htmlDir": "docs/post/jenkins-bu-shu.html", "labels": ["\u90e8\u7f72"], "postTitle": "jenkins\u90e8\u7f72", "postUrl": "post/jenkins-bu-shu.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/4", "commentNum": 0, "wordCount": 247, "description": "docker pull jenkins/jenkins\r\n\r\ndocker run \\\r\n  -u root \\\r\n  --rm \\\r\n  -d \\\r\n  -p 8080:8080 \\\r\n  -p 50000:50000 \\\r\n  -v jenkins-data:/var/jenkins_home \\\r\n  -v /var/run/docker.sock:/var/run/docker.sock \\\r\n  --name jenkins \\\r\n  jenkins/jenkins:latest\u3002", "top": 0, "createdAt": 1717548104, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-05", "dateLabelColor": "#bc4c00"}, "P5": {"htmlDir": "docs/post/K8S-ji-qun-IP-qian-yi-fang-an.html", "labels": ["K8S"], "postTitle": "K8S\u96c6\u7fa4IP\u8fc1\u79fb\u65b9\u6848", "postUrl": "post/K8S-ji-qun-IP-qian-yi-fang-an.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/5", "commentNum": 0, "wordCount": 864, "description": "![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/df4eac8d-85f4-4e83-bc69-c4b2f34ef6e0)\r\n\ud83d\udc4d \u5148\u4fee\u6539master3\r\n\ud83d\udc4d :%s/172.16.8.70/172.16.102.70/g\r\n![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/44e9920b-3a94-45bf-bc96-d3d7ccc9ff9f)\r\n\ud83d\udc4d \u65b0\u589e\r\nmaster2 master1 \u540c\u7406\r\n\ud83d\udc4d master1\u6ce8\u610fnetwork\u4e0b\u9762\u7684IP\u8981\u6539\u56de\u4e4b\u524d\u7684\u53c2\u7167\u4e0b\u56fe(\u56e0\u4e3a\u5168\u5c40\u66ff\u6362\u4e86)\r\n![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/ca265ed9-9a8b-498d-9066-ae19f96467de)\r\n\ud83d\udc4d \u5c06 /root/.tallos \u548ckube \u6539\u4e3a\u65b0\u8282\u70b9master1\u7684IP\r\n\ud83d\udc4d kubectl edit configmap  cluster-config -n kube-system \u5c06IP\u6539\u4e3a\u65b0\u5730\u5740IP\r\n\ud83d\udc4d talosctl reboot -n ms1,ms2,ms3(IP)\r\n\ud83d\udc4d \u91cd\u542f\u5b8c\u6210\u540e\uff0c\u5c06\u7f51\u5173\u4fee\u6539\u65b0\u7684\u7f51\u5173\uff0c\u65e7IP\u5220\u9664\r\n![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/814dcc35-22fd-429f-bd60-ac0b7417fe18)\r\n![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/817a5bf1-9c84-434c-8d4e-caa9e35205ce)\u3002", "top": 0, "createdAt": 1717565217, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-05", "dateLabelColor": "#bc4c00"}, "P6": {"htmlDir": "docs/post/email.html", "labels": ["shell"], "postTitle": "email", "postUrl": "post/email.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/6", "commentNum": 0, "wordCount": 4881, "description": "```shell\r\n#!/bin/bash\r\n\r\n\r\n\r\n# \u53d1\u9001\u90ae\u4ef6\u65b9\u6cd5\r\nfunction send_config_files_by_email() {\r\n    project_name=$1\r\n\r\n    echo '\u8bf7\u8f93\u5165\u4f60\u90e8\u7f72\u7684\u9879\u76ee\u7684\u540d\u5b57\uff0c\u82f1\u6587\uff0c\u82e5\u8f93\u5165\u9519\u8bef \u8bf7\u7528ctrl+w\u64a4\u56de\u540e\u91cd\u65b0\u8f93\u5165'\r\n    read project_name\r\n\r\n    # \u5b9a\u4e49\u63a5\u6536\u8005\u5217\u8868\r\n    recipients=('1553232697@qq.com' '18640549232@163.com' '442283241@qq.com' '2505584859@qq.com' '1223645860@qq.com')\r\n\r\n    # \u5b9a\u4e49\u8981\u53d1\u9001\u7684\u914d\u7f6e\u6587\u4ef6\u5217\u8868\r\n    config_files=('/root/.kube/config' '/root/.talos/config')\r\n\r\n    # \u5b89\u88c5msmtp\u548cmailx\r\n    install_deps() {\r\n        if command -v yum &> /dev/null; then\r\n            echo '\u6b63\u5728\u4e3aCentOS/RHEL\u7cfb\u7edf\u5b89\u88c5\u5fc5\u8981\u8f6f\u4ef6...'\r\n            sudo yum install -y msmtp ca-certificates mailx\r\n        else\r\n            echo '\u65e0\u6cd5\u8bc6\u522b\u7684\u5305\u7ba1\u7406\u5668\uff0c\u8bf7\u624b\u52a8\u5b89\u88c5msmtp\u548cmailx\u3002", "top": 0, "createdAt": 1717571466, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-05", "dateLabelColor": "#bc4c00"}, "P7": {"htmlDir": "docs/post/hb_docker.sh.html", "labels": ["shell"], "postTitle": "hb_docker.sh", "postUrl": "post/hb_docker.sh.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/7", "commentNum": 0, "wordCount": 2152, "description": "```shell\r\n#!/bin/bash\r\nHarbor_Address=172.16.1.200       #Harbor\u4e3b\u673a\u5730\u5740\r\nHarbor_User=admin                      #\u767b\u5f55Harbor\u7684\u7528\u6237\r\nHarbor_Passwd=Harbor12345              #\u767b\u5f55Harbor\u7684\u7528\u6237\u5bc6\u7801\r\nImages_File=./images.list      # \u955c\u50cf\u6e05\u5355\u6587\u4ef6\r\nTar_File=/backup/Harbor-backup/                 #\u955c\u50cftar\u5305\u5b58\u653e\u8def\u5f84\r\nset -x\r\n\r\n# \u83b7\u53d6Harbor\u4e2d\u6240\u6709\u7684\u9879\u76ee\uff08Projects\uff09\r\nProject_List=$(curl -u admin:Harbor12345  -H 'Content-Type: application/json' -X GET  https://$Harbor_Address/api/v2.0/projects  -k  | python3 -m json.tool | grep name | awk '/'name': /' | awk -F ''' '{print $4}')\r\n\r\nfor Project in $Project_List;do\r\n   # \u5faa\u73af\u83b7\u53d6\u9879\u76ee\u4e0b\u6240\u6709\u7684\u955c\u50cf\r\n    Image_Names=$(curl -u admin:Harbor12345 -H 'Content-Type: application/json' -X GET https://$Harbor_Address/api/v2.0/projects/$Project/repositories -k | python3 -m json.tool | grep name | awk '/'name': /' | awk -F ''' '{print $4}')\r\n    for Image in $Image_Names;do\r\n        # \u5faa\u73af\u83b7\u53d6\u955c\u50cf\u7684\u7248\u672c\uff08tag)\r\n        Image_Tags=$(curl -u admin:Harbor12345  -H 'Content-Type: application/json'   -X GET  https://$Harbor_Address/v2/$Image/tags/list  -k |  awk -F '''  '{print $8,$10,$12}')\r\n       for Tag in $Image_Tags;do\r\n            # \u683c\u5f0f\u5316\u8f93\u51fa\u955c\u50cf\u4fe1\u606f\r\n            echo '$Harbor_Address/$Image:$Tag'   >> harbor-images-`date '+%Y-%m-%d'`.txt\r\n        done\r\n    done\r\ndone\r\n\r\n# \u8bfb\u53d6Images_File\u6587\u4ef6\u4e2d\u7684\u955c\u50cf\u540d\u79f0\r\nwhile read -r image_tag; do\r\n    # \u4f7f\u7528awk\u63d0\u53d6\u955c\u50cf\u540d\u79f0\u548c\u6807\u7b7e\uff0c\u540c\u65f6\u5904\u7406\u7279\u6b8a\u5b57\u7b26\r\n    image_Name=$(echo $image_tag | awk -F/ '{print $3}' |  awk -F: '{print $1}' | sed 's/\\//-/g')\r\n    image_Lable=$(echo $image_tag | awk -F/ '{print $3}' |  awk -F: '{print $2}' | sed 's/:/_/g')\r\n\r\n    # \u68c0\u67e5image_Name\u548cimage_Lable\u662f\u5426\u4e3a\u7a7a\r\n    if [ -z '$image_Name' ]; then\r\n        echo 'Error: Empty image_Name for $image_tag' >> error_images.txt\r\n        continue\r\n    fi\r\n    if [ -z '$image_Lable' ]; then\r\n        echo 'Error: Empty image_Lable for $image_tag' >> error_images.txt\r\n        continue\r\n    fi\r\n\r\n    # \u521b\u5efa\u5b89\u5168\u7684\u6587\u4ef6\u540d\r\n    image_save='$image_Name-$image_Lable'\r\n\r\n    docker pull $Harbor_Address/$image_tag\r\n    docker tag $Harbor_Address/$image_tag $image_tag\r\n    docker save $image_tag -o '$Tar_File/$image_save.tar'\r\n    docker rmi $Harbor_Address/$image_tag\r\n    docker rmi $image_tag\r\ndone < '$Images_File'\r\n\u3002", "top": 0, "createdAt": 1717571817, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-05", "dateLabelColor": "#bc4c00"}, "P8": {"htmlDir": "docs/post/ji-qun-zheng-shu-ti-huan-fang-an.html", "labels": ["K8S"], "postTitle": "\u96c6\u7fa4\u8bc1\u4e66\u66ff\u6362\u65b9\u6848", "postUrl": "post/ji-qun-zheng-shu-ti-huan-fang-an.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/8", "commentNum": 0, "wordCount": 263, "description": "\u5148\u770b\u662f\u51e0\u4e2a\u8282\u70b9\u7684\u96c6\u7fa4\uff0c\u9700\u8981\u5728\u6bcf\u4e2a\u8282\u70b9\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u3002", "top": 0, "createdAt": 1717639228, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-06", "dateLabelColor": "#bc4c00"}, "P9": {"htmlDir": "docs/post/ji-qun-kuai-zhao-bei-fen.html", "labels": ["K8S"], "postTitle": "\u96c6\u7fa4\u5feb\u7167\u5907\u4efd", "postUrl": "post/ji-qun-kuai-zhao-bei-fen.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/9", "commentNum": 0, "wordCount": 962, "description": "snap install yq\r\n\r\n#\u521b\u5efaetcd\u8282\u70b9\u6570\u636e\u5e93\u5907\u4efd\r\ntalosctl -n 172.16.8.70 etcd snapshot db.snapshot\r\n\r\n#\u82e5etcd\u72b6\u6001\u5f02\u5e38\u5219\u901a\u8fc7\u76ee\u5f55\u6302\u8f7d\u65b9\u5f0f\u5907\u4efd\u5feb\u7167\r\ntalosctl -n 172.16.8.70 cp /var/lib/etcd/member/snap/db .\r\n\r\n#\u5907\u4efdyaml\u6587\u4ef6\r\ntalosctl -n 172.16.8.70 get mc v1alpha1 -o yaml | yq eval '.spec' - > machine_config.yaml\r\n\r\n\u786e\u4fdd\u6ca1\u6709\u5177\u6709\u673a\u5668\u7c7b\u578b\u7684\u63a7\u5236\u5e73\u9762\u8282\u70b9init\uff1a\r\n\r\ntalosctl -n 172.16.8.70,172.16.8.71,172.16.8.72 get machinetype\r\nNODE         NAMESPACE   TYPE          ID             VERSION   TYPE\r\n172.20.0.2   config      MachineType   machine-type   2         controlplane\r\n172.20.0.4   config      MachineType   machine-type   2         controlplane\r\n172.20.0.3   config      MachineType   machine-type   2         controlplane\r\n\r\n#\u91cd\u7f6e\u5e76\u91cd\u542f\r\ntalosctl -n 172.16.8.70 reset --graceful=false --reboot --system-labels-to-wipe=EPHEMERAL\r\n\r\n#\u6062\u590d\u5907\u4efd\r\ntalosctl -n 172.16.8.70 bootstrap --recover-from=./db.snapshot\r\n\r\n![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/f5dfde30-bce8-4ff7-900b-f5d99af109ac)\u3002", "top": 0, "createdAt": 1717641037, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-06", "dateLabelColor": "#bc4c00"}, "P10": {"htmlDir": "docs/post/helm-zhuan-yaml-fang-fa.html", "labels": ["helm"], "postTitle": "helm\u8f6cyaml\u65b9\u6cd5", "postUrl": "post/helm-zhuan-yaml-fang-fa.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/10", "commentNum": 0, "wordCount": 2214, "description": "#1.\u9996\u5148\u9700\u8981\u4e00\u4e2ahttp\u670d\u52a1\u5668\uff0c\u901a\u8fc7docker\u6216\u8005\u5728centos\u4e0a\u76f4\u63a5yum install \u90e8\u7f72\u90fd\u53ef\u4ee5\r\ndocker run -d -p 8081:80 -v /var/www:/usr/local/apache2/htdocs httpd\r\n\u8fd9\u4e2adocker\u547d\u4ee4\u4f1a\u521b\u5efa\u5e76\u8fd0\u884c\u4e00\u4e2ahttpd\u5bb9\u5668,\u53c2\u6570\u8bf4\u660e\u5982\u4e0b:\r\n\r\n-d: \u540e\u53f0\u8fd0\u884c\u5bb9\u5668\r\n-p 8081:80: \u6620\u5c04\u5bb9\u5668\u518580\u7aef\u53e3\u5230\u5bbf\u4e3b\u673a8081\u7aef\u53e3\r\n-v /var/www:/usr/local/apache2/htdocs: \u628a\u5bbf\u4e3b\u673a/var/www\u76ee\u5f55\u6302\u8f7d\u5230\u5bb9\u5668\u7684/usr/local/apache2/htdocs,\u4f5c\u4e3a\u7f51\u9875\u6587\u6863\u6839\u76ee\u5f55\r\nhttpd: \u4f7f\u7528httpd\u955c\u50cf\u542f\u52a8\u5bb9\u5668\r\n\u8fd9\u6837\u5c31\u5728\u5bbf\u4e3b\u673a8081\u7aef\u53e3\u542f\u52a8\u4e86\u4e00\u4e2ahttpd\u670d\u52a1\u5668,\u7f51\u9875\u6587\u6863\u6765\u81ea\u5bbf\u4e3b\u673a\u7684/var/www\u76ee\u5f55\u3002", "top": 0, "createdAt": 1717641376, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-06", "dateLabelColor": "#bc4c00"}, "P11": {"htmlDir": "docs/post/shan-dao-bu-shu.html", "labels": ["\u90e8\u7f72"], "postTitle": "\u7985\u9053\u90e8\u7f72", "postUrl": "post/shan-dao-bu-shu.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/11", "commentNum": 0, "wordCount": 341, "description": "docker pull hub.zentao.net/app/zentao:18.5 \r\n\r\n\r\n\r\ndocker run \\\r\n--name zentao \\\r\n-p 80:8888 \\\r\n--network=tt \\\r\n-v /data/zentao:/home/ljx/data \\\r\n-e MYSQL_INTERNAL=true \\\r\nhub.zentao.net/app/zentao:18.5\r\n\r\n\r\n\r\ndocker run -d -v /home/data:/data -p 8888:80 -e MYSQL_INTERNAL=true hub.zentao.net/app/zentao:18.5\r\n\r\nhttp://120.46.211.167:8888/\r\n\u3002", "top": 0, "createdAt": 1717641639, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-06", "dateLabelColor": "#bc4c00"}, "P12": {"htmlDir": "docs/post/harbor-bu-shu.html", "labels": ["\u90e8\u7f72"], "postTitle": "harbor\u90e8\u7f72", "postUrl": "post/harbor-bu-shu.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/12", "commentNum": 0, "wordCount": 1014, "description": "wget https://github.com/goharbor/harbor/releases/download/v2.11.0/harbor-offline-installer-v2.11.0.tgz\r\n\u89e3\u538b\u538b\u7f29\u5305\r\n\u590d\u5236compose\u6587\u4ef6\r\n![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/fcc2629c-8bd9-4889-97b3-c4c5cf1e88a0)\r\n#\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3\u548chostname\r\nvim harbor.yml\r\n\ud83d\udc4d \r\n# \u751f\u6210\u79c1\u94a5\r\nopenssl genrsa -out 172.16.8.3.key 2048\r\n# \u751f\u6210CSR\uff08\u8bc1\u4e66\u7b7e\u7f72\u8bf7\u6c42\uff09\r\nopenssl req -new -key 172.16.8.3.key -out 172.16.8.3.csr\r\n# \u7528\u79c1\u94a5\u751f\u6210\u81ea\u7b7e\u540d\u8bc1\u4e66\r\nopenssl x509 -req -days 365 -in 172.16.8.3.csr -signkey 172.16.8.3.key -out 172.16.8.3.crt\r\n\r\n\ud83d\udcaf #\u65b0\u7248\u4fee\u590d\r\nopenssl x509 -req -days 365 -in 172.16.8.3.csr -CA 172.16.8.3.crt -CAkey 172.16.8.3.key -set_serial 01 -out 172.16.8.3.crt -extfile <(echo -e 'subjectAltName = IP:172.16.8.3')\r\n\ud83d\udc4d \r\n#\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\r\nhttps:\r\n  enabled: true\r\n  port: 443\r\n  certificate: /home/test/harbor/harbor/172.16.8.3.crt\r\n  private_key: /home/test/harbor/harbor/172.16.8.3.key\r\n\ud83d\udc4d \r\n#\u6267\u884c\u811a\u672c\r\n./prepre\r\n\ud83d\udc4d \r\n#\u6267\u884c\u5b89\u88c5\u811a\u672c\r\ninstall\r\n#\u914d\u7f6e\u767b\u5f55\u6a21\u5757\r\nsudo tee /etc/docker/daemon.json <<-'EOF'\r\n> {\r\n> 'insecure-registries':['172.16.8.3']\r\n> }\r\n> EOF\r\n\u3002", "top": 0, "createdAt": 1717745066, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-07", "dateLabelColor": "#bc4c00"}, "P13": {"htmlDir": "docs/post/k8s_delete.sh.html", "labels": ["shell"], "postTitle": "k8s_delete.sh", "postUrl": "post/k8s_delete.sh.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/13", "commentNum": 0, "wordCount": 821, "description": "```shell\r\n#!/bin/bash\r\nfunction delete_pods_by_status {\r\n    local namespace='$1'\r\n    local status='$2'\r\n    kubectl -n '$namespace' get pods | grep '$status' | awk '{print $1}' | xargs kubectl -n '$namespace' delete pods\r\n}\r\n\r\n#ERROR\r\ndelete_pods_by_status 'default' 'Error'\r\ndelete_pods_by_status 'cncp-system' 'Error'\r\ndelete_pods_by_status 'metallb-system' 'Error'\r\ndelete_pods_by_status 'kubernetes-dashboard' 'Error'\r\ndelete_pods_by_status 'openebs' 'Error'\r\ndelete_pods_by_status 'kube-system' 'Error'\r\n\r\n#completed\r\ndelete_pods_by_status 'default' 'Completed'\r\ndelete_pods_by_status 'cncp-system' 'Completed'\r\ndelete_pods_by_status 'metallb-system' 'Completed'\r\ndelete_pods_by_status 'kubernetes-dashboard' 'Completed'\r\ndelete_pods_by_status 'openebs' 'Completed'\r\ndelete_pods_by_status 'kube-system' 'Completed'\u3002", "top": 0, "createdAt": 1717751267, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-07", "dateLabelColor": "#bc4c00"}, "P14": {"htmlDir": "docs/post/talos_master.html", "labels": ["shell"], "postTitle": "talos_master", "postUrl": "post/talos_master.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/14", "commentNum": 0, "wordCount": 7183, "description": "```shell\r\n#!/bin/bash\r\n# \u53c2\u6570\u68c0\u67e5\r\ntalosctl_version='talosctl version'\r\ntalosctl_service='talosctl service'\r\ncommand_jiqun='talosctl kubeconfig'\r\nkubectl_version='kubectl get pods -A'\r\n#\u751f\u6210\u914d\u7f6e\u6587\u4ef6\r\ncommand_token='talosctl  gen  config  mingyang https://172.16.102.102:6443  --config-patch-control-plane @patch.yaml --config-patch-worker @patch-worker.yaml'\r\nall_file_name=*\r\npatch_name=patch*\r\nk8s_path=/home/k8s\r\nfailpath=/opt\r\njituan_path=$1\r\ntalos_path=$2\r\ncncp_path=$3\r\nipv46_patch=$4\r\nlinshi_ip=$5\r\ntalos_cfg=$6\r\ndel_jt=${failpath}/${jituan_path}\r\nctrl_file=${failpath}/${jituan_path}/${talos_path}/controlplane.yaml\r\ntaloscfg_file=${failpath}/${jituan_path}/${talos_path}/talosconfig\r\ntalos_file_path=${failpath}/${jituan_path}/${talos_path}\r\n\r\n\r\n# \u68c0\u67e5\u53c2\u6570\u4e2a\u6570\u662f\u5426\u6ee1\u8db3\u8981\u6c42\r\nif [[ $# -lt 6 ]]; then\r\n    echo '\u4f7f\u7528\u9519\u8bef\uff01\u4f7f\u7528\u65b9\u6cd5 sh danji.sh \u96c6\u56e2\u540d talos cncp-helm \u8981\u4fee\u6539\u7684IP\u5730\u5740!\u4e3b\u673a\u4f4d! \u4e34\u65f6IP\u5730\u5740\u7ed1\u5b9a\u7684\u5730\u5740!\u4e3b\u673a\u4f4d! talosconfig\u4e2d\u7684IP\u5730\u5740!\u4e3b\u673a\u4f4d!'\r\n    exit 1\r\nfi\r\n\r\n# \u9010\u4e2a\u68c0\u67e5\u53c2\u6570\u662f\u5426\u5408\u6cd5\uff08\u4ee5\u68c0\u67e5\u975e\u7a7a\u4e14\u975e\u4ec5\u7a7a\u683c\u5b57\u7b26\u4e3a\u4f8b\uff09\r\nfor ((i=1; i<=6; i++)); do\r\n    param='${!i}'\r\n    if [[ -z '$param' || '$param' =~ ^\\s+$ ]]; then\r\n        echo '\u4f7f\u7528\u9519\u8bef\uff01\u4f7f\u7528\u65b9\u6cd5 sh danji.sh \u96c6\u56e2\u540d talos cncp-helm \u8981\u4fee\u6539\u7684IP\u5730\u5740!\u4e3b\u673a\u4f4d! \u4e34\u65f6IP\u5730\u5740\u7ed1\u5b9a\u7684\u5730\u5740!\u4e3b\u673a\u4f4d! talosconfig\u4e2d\u7684IP\u5730\u5740!\u4e3b\u673a\u4f4d!'\r\n        exit 1\r\n    fi\r\ndone\r\n\r\n# \u6240\u6709\u53c2\u6570\u68c0\u67e5\u901a\u8fc7\uff0c\u8bb0\u5f55\u65e5\u5fd7\u5e76\u7ee7\u7eed\u6267\u884c\r\n\r\nkubecfg_path='/root/.kube/config'\r\nif rm '$kubecfg_path'; then\r\n  echo '\u6587\u4ef6 '$kubecfg_path' \u5df2\u6210\u529f\u5220\u9664\u3002", "top": 0, "createdAt": 1718097108, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-11", "dateLabelColor": "#bc4c00"}, "P15": {"htmlDir": "docs/post/project_ddi.html", "labels": ["shell"], "postTitle": "project_ddi", "postUrl": "post/project_ddi.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/15", "commentNum": 0, "wordCount": 16209, "description": "```shell\r\n#!/bin/bash\r\n#\u96c6\u56e2\u6587\u4ef6\u5939\u4e0b\u65b9\u6267\u884c\r\n#\u6267\u884c\u4e4b\u524d\u786e\u5b9a/path/to/dhcpdb_create.pgsql\u6709\u6ca1\u6709\u8fd9\u4e2a\u6587\u4ef6\r\n\r\n\r\n\r\nsource_config_path='/root/.kube/config'\r\nhelm_path='cncp-helm'\r\nservices_path='cncp-helm/cncp-basic-services/values.yaml'\r\ncore_path='cncp-helm/cncp-core-components/values.yaml'\r\none_path=$1\r\ntow_path=$2\r\nipv4_path='172.16.102.240-172.16.102.244'\r\nipv6_path='2408:8631:c02:ffa2::240-2408:8631:c02:ffa2::244'\r\ndns_path=$3\r\ndhcp_path=$4\r\nddi_file_path='cncp-helm/ddi-components/values.yaml'\r\nddi_dns_path=$5\r\nddi_dhcp_path=$6\r\nsql_path=$7\r\n\r\n\r\n# bak\r\n#backup_suffix='_$(date +%Y%m%d%H%M%S).bak'\r\n#cp '$services_path' '${services_path}${backup_suffix}'\r\n#cp '$core_path' '${core_path}${backup_suffix}'\r\n\r\n#echo '\u670d\u52a1\u8def\u5f84\uff08$services_path\uff09\u548c\u6838\u5fc3\u8def\u5f84\uff08$core_path\uff09\u7684\u5907\u4efd\u5df2\u5b8c\u6210\u3002", "top": 0, "createdAt": 1718097178, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-11", "dateLabelColor": "#bc4c00"}, "P16": {"htmlDir": "docs/post/k8s_status.html", "labels": ["shell"], "postTitle": "k8s_status", "postUrl": "post/k8s_status.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/16", "commentNum": 0, "wordCount": 1143, "description": "echo '\u5f00\u59cb\u68c0\u67e5k8s\u96c6\u7fa4\u72b6\u6001'\r\nwhile true; do\r\n  # \u5c1d\u8bd5\u83b7\u53d6\u6240\u6709Pod\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u76f4\u5230\u6210\u529f\r\n  while true; do\r\n    pod_statuses=$(kubectl get pods -A --output=json 2>&1)\r\n    if [[ $(echo '$pod_statuses' | jq -r '.items[] | select(.metadata.namespace == 'kube-system')') ]]; then  # \u68c0\u67e5kube-system\u662f\u5426\u5b58\u5728\r\n      echo '\u6210\u529f\u8fde\u63a5\u5230Kubernetes\u96c6\u7fa4'\r\n      break\r\n    fi\r\n    echo '\u65e0\u6cd5\u83b7\u53d6kube-system\u547d\u540d\u7a7a\u95f4\u7684Pod\u4fe1\u606f\u3002", "top": 0, "createdAt": 1718097224, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-11", "dateLabelColor": "#bc4c00"}, "P17": {"htmlDir": "docs/post/test_auto.html", "labels": ["python"], "postTitle": "test_auto", "postUrl": "post/test_auto.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/17", "commentNum": 0, "wordCount": 87, "description": "[case_test.zip](https://github.com/user-attachments/files/15785392/case_test.zip)\r\n\r\n\r\n\u3002", "top": 0, "createdAt": 1718097472, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-11", "dateLabelColor": "#bc4c00"}, "P18": {"htmlDir": "docs/post/talos.html", "labels": ["\u7cfb\u7edf\u67b6\u6784"], "postTitle": "talos", "postUrl": "post/talos.html", "postSourceUrl": "https://github.com/donkeytt11111/jiaxin.github.io/issues/18", "commentNum": 0, "wordCount": 119, "description": "![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/86f3f38b-b49e-4fa7-b7b6-47d3507d76a1)\r\n\r\n\r\n\u3002", "top": 0, "createdAt": 1718098255, "style": "", "script": "", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "createdDate": "2024-06-11", "dateLabelColor": "#bc4c00"}}, "singeListJson": {}, "labelColorDict": {"DevOps": "#CF22EF", "helm": "#e4e669", "K8S": "#d876e3", "python": "#E20F63", "shell": "#008672", "\u57f9\u8bad": "#7057ff", "\u7cfb\u7edf\u67b6\u6784": "#3A7D1B", "\u90e8\u7f72": "#a2eeef"}, "displayTitle": "\u5218\u4f73\u946b\u7b14\u8bb0", "faviconUrl": "https://github.githubassets.com/favicons/favicon.svg", "ogImage": "https://github.githubassets.com/favicons/favicon.svg", "homeUrl": "https://donkeytt11111.github.io/jiaxin.github.io", "prevUrl": "/index.html", "nextUrl": "disabled"}