<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>åˆ˜ä½³é‘«ç¬”è®°</title><link>https://donkeytt11111.github.io/jiaxin.github.io</link><description>æ¬¢è¿æ‚¨</description><copyright>åˆ˜ä½³é‘«ç¬”è®°</copyright><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://github.githubassets.com/favicons/favicon.svg</url><title>avatar</title><link>https://donkeytt11111.github.io/jiaxin.github.io</link></image><lastBuildDate>Wed, 05 Jun 2024 05:27:22 +0000</lastBuildDate><managingEditor>åˆ˜ä½³é‘«ç¬”è®°</managingEditor><ttl>60</ttl><webMaster>åˆ˜ä½³é‘«ç¬”è®°</webMaster><item><title>K8Sé›†ç¾¤IPè¿ç§»æ–¹æ¡ˆ</title><link>https://donkeytt11111.github.io/jiaxin.github.io/post/K8S-ji-qun-IP-qian-yi-fang-an.html</link><description>![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/df4eac8d-85f4-4e83-bc69-c4b2f34ef6e0)&#13;
ğŸ‘ å…ˆä¿®æ”¹master3&#13;
ğŸ‘ :%s/172.16.8.70/172.16.102.70/g&#13;
![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/44e9920b-3a94-45bf-bc96-d3d7ccc9ff9f)&#13;
ğŸ‘ æ–°å¢&#13;
master2 master1 åŒç†&#13;
ğŸ‘ master1æ³¨æ„networkä¸‹é¢çš„IPè¦æ”¹å›ä¹‹å‰çš„å‚ç…§ä¸‹å›¾(å› ä¸ºå…¨å±€æ›¿æ¢äº†)&#13;
![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/ca265ed9-9a8b-498d-9066-ae19f96467de)&#13;
ğŸ‘ å°† /root/.tallos å’Œkube æ”¹ä¸ºæ–°èŠ‚ç‚¹master1çš„IP&#13;
ğŸ‘ kubectl edit configmap  cluster-config -n kube-system å°†IPæ”¹ä¸ºæ–°åœ°å€IP&#13;
ğŸ‘ talosctl reboot -n ms1,ms2,ms3(IP)&#13;
ğŸ‘ é‡å¯å®Œæˆåï¼Œå°†ç½‘å…³ä¿®æ”¹æ–°çš„ç½‘å…³ï¼Œæ—§IPåˆ é™¤&#13;
![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/814dcc35-22fd-429f-bd60-ac0b7417fe18)&#13;
![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/817a5bf1-9c84-434c-8d4e-caa9e35205ce)ã€‚</description><guid isPermaLink="true">https://donkeytt11111.github.io/jiaxin.github.io/post/K8S-ji-qun-IP-qian-yi-fang-an.html</guid><pubDate>Wed, 05 Jun 2024 05:26:57 +0000</pubDate></item><item><title>jenkinséƒ¨ç½²</title><link>https://donkeytt11111.github.io/jiaxin.github.io/post/jenkins-bu-shu.html</link><description>docker pull jenkins/jenkins&#13;
&#13;
docker run \&#13;
  -u root \&#13;
  --rm \&#13;
  -d \&#13;
  -p 8080:8080 \&#13;
  -p 50000:50000 \&#13;
  -v jenkins-data:/var/jenkins_home \&#13;
  -v /var/run/docker.sock:/var/run/docker.sock \&#13;
  --name jenkins \&#13;
  jenkins/jenkins:latestã€‚</description><guid isPermaLink="true">https://donkeytt11111.github.io/jiaxin.github.io/post/jenkins-bu-shu.html</guid><pubDate>Wed, 05 Jun 2024 00:41:44 +0000</pubDate></item><item><title>Gitlabéƒ¨ç½²</title><link>https://donkeytt11111.github.io/jiaxin.github.io/post/Gitlab-bu-shu.html</link><description>vim /etc/ssh/sshd_config&#13;
Port = 2424&#13;
&#13;
systemctl restart sshd&#13;
&#13;
mkdir -p /srv/gitlab&#13;
&#13;
export GITLAB_HOME=/srv/gitlab&#13;
&#13;
```golang&#13;
&#13;
version: '3.6'&#13;
services:&#13;
  gitlab:&#13;
    image: gitlab/gitlab-ce:latest&#13;
    container_name: gitlab&#13;
    restart: always&#13;
    hostname: '172.16.8.3'&#13;
    environment:&#13;
      GITLAB_OMNIBUS_CONFIG: |&#13;
        external_url 'http://172.16.8.3:8929'&#13;
        gitlab_rails['gitlab_shell_ssh_port'] = 2424&#13;
    ports:&#13;
      - '8929:8929'&#13;
      - '4443:443'&#13;
      - '2424:22'&#13;
    volumes:&#13;
      - '/srv/config:/etc/gitlab'&#13;
      - '/srv/logs:/var/log/gitlab'&#13;
      - '/srv/data:/var/opt/gitlab'&#13;
    shm_size: '256m'&#13;
ã€‚</description><guid isPermaLink="true">https://donkeytt11111.github.io/jiaxin.github.io/post/Gitlab-bu-shu.html</guid><pubDate>Wed, 05 Jun 2024 00:39:51 +0000</pubDate></item><item><title>PXEç³»ç»Ÿéƒ¨ç½²</title><link>https://donkeytt11111.github.io/jiaxin.github.io/post/PXE-xi-tong-bu-shu.html</link><description>âœ§ ä½¿ç”¨httpç”¨æ¥å‘å¸ƒlinuxç³»ç»Ÿçš„å®‰è£…æ ‘ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨NFSã€FTP serveræˆ–HTTPSï¼‰&#13;
âœ§ DHCP serverä¸ºå®¢æˆ·ç«¯åˆ†é…ipå¹¶æä¾›TFTPæœåŠ¡å™¨åœ°å€åŠPXEå¯åŠ¨æ–‡ä»¶ä½ç½®&#13;
âœ§ TFTP serverä¸ºå®¢æˆ·ç«¯æä¾›å¼•å¯¼æ–‡ä»¶ã€‚</description><guid isPermaLink="true">https://donkeytt11111.github.io/jiaxin.github.io/post/PXE-xi-tong-bu-shu.html</guid><pubDate>Tue, 04 Jun 2024 09:07:13 +0000</pubDate></item><item><title>harborè‡ªåŠ¨åŒ–æ‹‰å–é•œåƒæ–¹æ¡ˆ</title><link>https://donkeytt11111.github.io/jiaxin.github.io/post/harbor-zi-dong-hua-la-qu-jing-xiang-fang-an.html</link><description>grep data_volume  /app/harbor/harbor.yml    #æ ¹æ®é…ç½®æ–‡ä»¶æŸ¥æ‰¾æ•°æ®å­˜å‚¨ç›®å½•&#13;
data_volume: /data&#13;
&#13;
cd /data/registry     #è¿›å…¥åˆ°Harborçš„æ•°æ®ç›®å½•ä¸‹&#13;
&#13;
find  docker/   -type  d  -name 'current'  | sed  's|docker/registry/v2/repositories/||g;s|/_manifests/tags/|:|g;s|/current||g'  &gt;  images.list&#13;
&#13;
cat images.list&#13;
&#13;
curl https://192.168.2.250:443/api/version  -k&#13;
{'version':'v2.0'}&#13;
![image](https://github.com/donkeytt11111/jiaxin.github.io/assets/167744103/2390402e-6803-45a1-bf0d-e99f0347395d)&#13;
&#13;
&#13;
&#13;
```shell&#13;
#!/bin/bash&#13;
Harbor_Address=172.16.1.200       #Harborä¸»æœºåœ°å€&#13;
Harbor_User=admin                      #ç™»å½•Harborçš„ç”¨æˆ·&#13;
Harbor_Passwd=Harbor12345              #ç™»å½•Harborçš„ç”¨æˆ·å¯†ç &#13;
Images_File=./images.list   # é•œåƒæ¸…å•æ–‡ä»¶&#13;
Tar_File=/backup/Harbor-backup/                 #é•œåƒtaråŒ…å­˜æ”¾è·¯å¾„&#13;
set -x&#13;
# è·å–Harborä¸­æ‰€æœ‰çš„é¡¹ç›®ï¼ˆProjectsï¼‰&#13;
Project_List=$(curl -u admin:Harbor12345  -H 'Content-Type: application/json' -X GET  https://172.16.1.200/api/v2.0/projects  -k  | python3 -m json.tool | grep name | awk '/'name': /' | awk -F ''' '{print $4}')&#13;
&#13;
for Project in $Project_List;do&#13;
   # å¾ªç¯è·å–é¡¹ç›®ä¸‹æ‰€æœ‰çš„é•œåƒ&#13;
    Image_Names=$(curl -u admin:Harbor12345 -H 'Content-Type: application/json' -X GET https://172.16.1.200/api/v2.0/projects/$Project/repositories -k | python3 -m json.tool | grep name | awk '/'name': /' | awk -F ''' '{print $4}')&#13;
    for Image in $Image_Names;do&#13;
        # å¾ªç¯è·å–é•œåƒçš„ç‰ˆæœ¬ï¼ˆtag)&#13;
        Image_Tags=$(curl -u admin:Harbor12345  -H 'Content-Type: application/json'   -X GET  https://172.16.1.200/v2/$Image/tags/list  -k |  awk -F '''  '{print $8,$10,$12}')&#13;
       for Tag in $Image_Tags;do&#13;
            # æ ¼å¼åŒ–è¾“å‡ºé•œåƒä¿¡æ¯&#13;
            echo '$Harbor_Address/$Image:$Tag'   &gt;&gt; harbor-images-`date '+%Y-%m-%d'`.txt&#13;
        done&#13;
    done&#13;
done&#13;
Image_tags=$(uniq $Images_File)&#13;
for image_tag in $Image_tags;do&#13;
    image_Name=$(echo $image_tag | awk -F/ '{print $3}' |  awk -F: '{print $1}')&#13;
    image_Lable=$(echo $image_tag | awk -F/ '{print $3}' |  awk -F: '{print $2}')&#13;
    #image_Name=$(echo $image_tag | awk -F ' +' '{print $1}')&#13;
    #image_Lable=$(echo $image_tag | awk -F ' +' '{print $2}')&#13;
    docker pull 172.16.1.200/$image_tag&#13;
    docker tag  172.16.1.200/$image_tag $image_tag&#13;
    docker save $image_tag  -o $image_Name.tar&#13;
    docker rmi  172.16.1.200/$image_tag&#13;
    docker rmi  $image_tag&#13;
    mv $image_Name.tar  $Tar_File&#13;
doneã€‚</description><guid isPermaLink="true">https://donkeytt11111.github.io/jiaxin.github.io/post/harbor-zi-dong-hua-la-qu-jing-xiang-fang-an.html</guid><pubDate>Tue, 04 Jun 2024 06:37:38 +0000</pubDate></item></channel></rss>